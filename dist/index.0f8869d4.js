function e(e,t=!1){return!1===t?document.querySelector(e):document.querySelectorAll(e)}async function t(e=!1,t=!1,s=!1,n=!1){try{const i={headers:{Authorization:`Basic ${window.btoa("OEC5-G60N-KHXP-YGQR:footastic")}`},method:"GET",timeout:5e3};let o;switch(s&&(i.body=new URLSearchParams(s)),e){case"entries":o="https://firstchurchcarrollton.wufoo.com/api/v3/forms/rt2tdqd0lcp3yx/entries.json/";break;case"fields":o="https://firstchurchcarrollton.wufoo.com/api/v3/forms/rt2tdqd0lcp3yx/fields.json/";break;default:o="https://firstchurchcarrollton.wufoo.com/api/v3/forms/rt2tdqd0lcp3yx.json/"}t&&(i.method=t);const a=await fetch(o,i),r=await a.json();if(!a.ok)throw new Error(`${r.message} (${a.status})`);return n?[a,r,t]:r}catch(e){console.error(e)}}var s=new class{formData={total:0,length:0};constructor(){}theData=async function(){try{const e=await t();this.formData.form=e.Forms[0];const s=await t("fields");this.formData.fields=s.Fields;const n=await t("entries");this.formData.entries=n.Entries,this.sumDollars(this.formData.entries)}catch(e){throw new Error(e)}};sumDollars(e){let t=0;e.forEach((e=>{switch(e.Field11){case"monthly":t+=12*Number(e.Field522);break;case"weekly":t+=52*Number(e.Field522);default:t+=Number(e.Field522)}this.formData.total=t}))}submitData=async function(e){const s={Field1:e[0],Field2:e[1],Field9:e[2],Field419:e[3],Field527:e[5],Field528:e[6],Field522:e[7].giving,Field11:e[7].freq};try{const e=await t("entries","POST",s);if(0===e.Success||1===e.Success&&e.ErrorText)throw new Error(e.ErrorText)}catch(e){console.error(e),alert("Oops. Something went wrong.")}}};function n(e){return`\n            <form>\n                <div class="section contact-info">\n                    <div class="contact-info__fields">\n                        <h3 class="contact-info__header">Your Name</h3>\n                        <div class="contact-info__fields--first">\n                            <label for="first">First Name</label>\n                            <input required type="text" name="first" id="first">\n                        </div>\n                        <div class="contact-info__fields--second">\n                            <label for="last">Last Name</label>\n                            <input required type="text" name="last" id="last">\n                        </div>\n                    </div>\n                    <div class="contact-info__fields">\n                        <h3 class="contact-info__header">Contact Info</h3>\n                        <div class="contact-info__fields--first">\n                            <label for="email">Email</label>\n                            <input required type="email" name="email" id="email">\n                        </div>\n                        <div class="contact-info__fields--second">\n                            <label for="cell">Phone</label>\n                            <input required type="tel" name="phone" id="cell" inputtype="numeric" >\n                        </div>\n                    </div>\n                </div>\n                <div class="section time">\n                    <div class="section-header">\n                        <h2 class="section-header__headline">Time</h2>\n                        <span class="section-header__description">${e.fields[4].Title}</span>\n                    </div>\n                    <div class="time__fields">\n                        <label for="time-field">Your response</label>\n                        <textarea placeholder="&#34;In 2023, I commit to attending worship more often...&#34;&#10;&#34;I&#39;m committing to attend more events...&#34;" name="time-field" id="time-field" cols="30" rows="10"></textarea>\n                    </div>\n                </div>\n                <div class="section talent">\n                    <div class="section-header">\n                        <h2 class="section-header__headline">talent</h2>\n                        <span class="section-header__description">${e.fields[5].Title}</span>\n                    </div>\n                    <div class="talent__fields">\n                        <label for="talent-field">Your response</label>\n                        <textarea name="talent-field" id="talent-field" placeholder="&#34;In 2023, I commit to using my gift of [blank] in ministry...&#34;&#10;&#34;I&#39;d like to grow my talents by volunteering with...&#34;" cols="30" rows="10"></textarea>\n                    </div>\n                </div>\n                <div class="section treasure">\n                    <div class="section-header">\n                        <h2 class="section-header__headline">treasure</h2>\n                    </div>\n                    <div class="treasure__fields">\n                        <div class="treasure__fields--giving">\n                            <label for="dollars">${e.fields[6].Title}</label>\n                            <input type="number" name="dollars" id="dollars" placeholder="85.50" step="0.01">\n                        </div>\n                        <div class="treasure__fields--frequency">\n                            <label for="frequency">Frequency</label>\n                            <select name="frequency" id="frequency">\n                                <option value="1">One-Time</option>\n                                <option value="52">Weekly</option>\n                                <option selected value="12">Monthly</option>\n                                <option value="1">Annually</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <button type="submit" id="submit">Submit</button>\n                </form>\n                `}var i=new class{mobile=!1;form=e(".commitmentForm");goalsText=e(".goals__display--text");allInputs=[];responseContainer=e(".responses");entries={time:[],talent:[]};constructor(){(screen.width<400||window.innerWidth<400)&&(this.mobile=!0),this.renderSpinner(this.form)}mobileRedirect(){window.location.href="https://firstchurchcarrollton.wufoo.com/forms/rt2tdqd0lcp3yx/"}renderSpinner(e){e.innerHTML='<div class="lds-dual-ring"></div>'}showForm(e){this.form.innerHTML=n(e),this.#e(e.total,e.entries.length),this.#t()}showResponses(e){this.#s(e),this.responseContainer.innerHTML="";const t=[];this.entries.time.forEach((e=>t.push(e))),this.entries.talent.forEach((e=>t.push(e))),0!==t.length&&setInterval((()=>{const e=this.#n(t);let s=`<div class="response"><p class="response__text">"${t[e]}"</p></div>`;this.responseContainer.innerHTML=s}),3e3)}#s(e){e.forEach((e=>{const t=e.Field527,s=e.Field528;t.length>0&&this.entries.time.push(t),s.length>0&&this.entries.talent.push(s)}))}#n(e){const t=e.length;return Math.floor(Math.random()*t)}#t(){const t=e("form input",!0),s=e("form textarea",!0);t.forEach((e=>this.allInputs.push(e))),s.forEach((e=>this.allInputs.push(e))),this.allInputs.forEach((e=>{e.addEventListener("focusin",(t=>{e.closest(".section").classList.contains("active")||e.closest(".section").classList.add("active")})),e.addEventListener("focusout",(t=>{e.closest(".section").classList.contains("active")&&e.closest(".section").classList.remove("active")}))}))}#e(e,t){t>0?(this.goalsText.innerHTML=`${e.toLocaleString("en-US",{style:"currency",currency:"USD"})} pledged by ${t} ${t>1?"households":"household"}`,this.#i(t)):this.goalsText.innerHTML="Looks like you're the first to fill this form out. Nice!"}#i(t){const s=t/200*100,n=document.getElementById("myBar"),i=e(".goals__progress--counter");t>=200&&(n.style.width="100%",i.innerHTML="We've hit our goal!"),t<200&&(n.style.width=s<=10?"10%":`${s}%`,i.innerHTML=`${s}%`)}#o(e){const t=document.getElementById("dollars").value,s=document.getElementById("frequency"),n=s.value,i={giving:t,freq:s.options[s.selectedIndex].text.toLowerCase()},o=e.total+Number(t)*Number(n);return this.#e(o,e.entries.length+1),i}onSubmit(e,t){const s=`<div id="thanks"><h2>${e.form.RedirectMessage}</h2></div>`;this.form.addEventListener("submit",(n=>{n.preventDefault();const i=this.allInputs.map((e=>e.value));i.push(this.#o(e)),t(i),this.form.style.border="none",this.form.innerHTML=s}))}};!async function(){try{i.mobile?i.mobileRedirect():(await s.theData(),i.showForm(s.formData),i.showResponses(s.formData.entries),i.onSubmit(s.formData,s.submitData))}catch(e){console.error(e)}}();
//# sourceMappingURL=index.0f8869d4.js.map
